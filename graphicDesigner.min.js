!function(e){function t(i){if(n[i])return n[i].exports;var r=n[i]={exports:{},id:i,loaded:!1};return e[i].call(r.exports,r,r.exports,t),r.loaded=!0,r.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){window.setImmediate||(window.setImmediate=window.setTimeout);var i=n(1);i.plugins.imageUpload=n(2),i.plugins.textInput=n(3),i.plugins.cache=n(4),i.plugins.deleteButton=n(5),i.plugins.zIndexUpdate=n(6),i.plugins.backgroundColorPicker=n(7),i.plugins.sizeSelect=n(8),i.plugins.scaling=n(9),i.plugins.rotating=n(10),i.plugins.preview=n(11),window.graphicDesigner=i},function(e,t,n){var i=n(12),r=n(13),o=n(14),a=n(15),s=n(16),c=n(17),u=n(18),l={width:500,height:500,scaleFactor:1,unit:"pixel",dpi:300,selectBodyClass:"item-selected",itemClass:"item",itemSelectClass:"selected",itemDragClass:"dragging"},d=function(e){var t={};return t.utils=s,t.config=s.defaults(e,l),t.container=document.querySelector(t.config.element),t.ready=function(){return t.emit("ready"),t},t.setSize=function(e,n){return"mm"===t.config.unit&&(e=f(e),n=f(n)),"pixel"!==t.config.unit&&(e*=t.config.dpi,n*=t.config.dpi),t.svg.setAttribute("width",Math.round(e*t.config.scaleFactor)),t.svg.setAttribute("height",Math.round(n*t.config.scaleFactor)),t.emit("svg:resize"),t},t.createPng=function(){t.emit("render");var e=t.svg,n=parseInt(e.getAttribute("width"),10),i=parseInt(e.getAttribute("height"),10);e.setAttribute("width",n/t.config.scaleFactor),e.setAttribute("height",i/t.config.scaleFactor),e.setAttribute("viewBox","0 0 "+n+" "+i);var r=(new XMLSerializer).serializeToString(e),o=new Blob([r],{type:"image/svg+xml"}),a=(window.URL||window.webkitURL||window).createObjectURL(o);return e.setAttribute("width",n),e.setAttribute("height",i),e.removeAttribute("viewBox"),c(a)},t.createBlob=function(){return t.createPng().then(function(e){return u(e.url)})},Object.keys(d.plugins).forEach(function(e){t[e]=function(n){var i=d.plugins[e];return i(t,s.defaults(n,i.defaults)),t}}),i(t),r(t),o(t),a(t),t};d.plugins={};var f=function(e){return Math.round(3.937*e)/100};e.exports=d},function(e,t,n){var i=n(21),r=n(19),o=function(e,t){var n=document.querySelector(t.element),o=document.createElement("input");o.type="file",o.accept="image/*";var a=function(){g(o.files).then(r).then(v).then(m).then(p)},s=function(){var e=document.createEvent("HTMLEvents");e.initEvent("click",!0,!1),o.dispatchEvent(e)},c=function(e){e.preventDefault(),f(!1),g(e.dataTransfer.files).then(r).then(v).then(h(e)).then(p)},u=function(e){e.preventDefault(),f(!0)},l=function(){f(!1)},d=function(e,t){var n,i,r;return function o(){return i=arguments,n?void(r=!0):(e.apply(null,i),void(n=setTimeout(function(){clearTimeout(n),n=void 0,r&&(r=!1,o.apply(null,i))},t)))}},f=d(function(e){t.dropBodyClass&&document.body.classList[e?"add":"remove"](t.dropBodyClass)},300),g=function(e){return 1===e.length?i.resolve(e[0]):i.reject()},v=function(t){var n=e.svg.getBoundingClientRect(),i=Math.min(n.width/t.width,n.height/t.height,1);return t.width=Math.round(i*t.width),t.height=Math.round(i*t.height),t},m=function(t){var n=e.svg.getBoundingClientRect();return t.x=Math.round(.5*(n.width-t.width)),t.y=Math.round(.5*(n.height-t.height)),t},p=function(t){var n=e.utils.svgCreate("image");n.setAttribute("height",t.height),n.setAttribute("width",t.width),n.setAttribute("class",e.config.itemClass),n.setAttributeNS("http://www.w3.org/1999/xlink","href",t.url),e.utils.svgTranslate(n,t.x,t.y),e.svg.appendChild(n),e.emit("element:create",n)},h=function(t){return t.target!==e.svg?m:function(n){var i=e.svg.getBoundingClientRect(),r=i.top+document.body.scrollTop,o=i.left+document.body.scrollLeft;return n.x=Math.round(t.pageX-o-.5*n.width),n.y=Math.round(t.pageY-r-.5*n.height),n}};document.addEventListener("dragenter",u),document.addEventListener("dragover",u),document.addEventListener("dragleave",l),document.addEventListener("drop",c),o.addEventListener("change",a),n&&n.addEventListener("click",s)};e.exports=o},function(e,t,n){var i=n(20),r={selectBodyClass:"text-selected",fontSelector:".text-font",fontAttribute:"data-font",color:"#ffffff",textWidth:100,textHeight:30,placeholder:"Insert Text …",scaleFactor:1,scaleOffset:5,fontSize:15},o=function(e,t){var n,r=document.querySelector(t.input);r.setAttribute("placeholder",t.placeholder);var o=document.querySelector(t.sizeInput);o.value=t.fontSize,o.setAttribute("min",0);var a=function(){document.body.classList.add(t.selectBodyClass)},s=function(){document.body.classList.remove(t.selectBodyClass)},c=function(i){"text"===i.tagName&&(n=i,r.value=n.innerHTML!==t.placeholder?n.innerHTML:"",o.value=p(n),e.emit("text:select:font",n.style.fontFamily),e.emit("text:select:color",n.style.fill),a())},u=function(){var n=e.utils.svgCreate("text"),i=e.svg.getBoundingClientRect();n.setAttribute("class",e.config.itemClass),n.innerHTML=t.placeholder,e.utils.svgTranslate(n,i.width/2,i.height/2),e.svg.appendChild(n),e.emit("element:create",n),r.focus()},l=function(){n.innerHTML=r.value||t.placeholder,e.emit("element:change:text",n),e.emit("resize",n)},d=function(){n.style.fontSize=o.value+"px",e.emit("resize",n),e.emit("element:font:resize")},f=function(e,t){for(var n=(e.parentNode||document).querySelectorAll(t),i=-1;n[++i]&&n[i]!=e;);return!!n[i]},g=function(i){f(i.target,t.fontSelector)&&(n.style.fontFamily=i.target.getAttribute(t.fontAttribute),e.emit("element:change:font",n))},v=function(e){n.style.fill=e},m=function(){e.emit("element:change:color",n.style.fill)},p=function(e){return e.style.fontSize.match(/[0-9]+/)||t.fontSize};i(e,{element:t.colorPicker,image:t.colorImage},v,m),document.addEventListener("click",g),r.addEventListener("change",l),r.addEventListener("input",l),r.addEventListener("keyup",l),o.addEventListener("change",d),o.addEventListener("input",d),o.addEventListener("keyup",d),document.querySelector(t.createButton).addEventListener("click",u),e.on("element:select",c),e.on("element:unselect",s)};o.defaults=r,e.exports=o},function(e){var t={storageKey:"graphicDesignerGraphic"},n=function(e,t){var n=function(){var n=localStorage.getItem(t.storageKey);n&&(e.container.innerHTML=n,e.svg=e.container.querySelector("svg"),e.emit("svg:load"))},i=function(){localStorage.setItem(t.storageKey,e.container.innerHTML),e.emit("cache:change")};e.on("ready",n).on("element",i).on("svg:resize",i).on("background",i)};n.defaults=t,e.exports=n},function(e){var t=function(e,t){var n=document.querySelector(t.element),i=function(){e.selected&&window.confirm("Soll das ausgewählte Element echt gelöscht werden?")&&(e.selected.parentNode.removeChild(e.selected),e.emit("element:delete"))};n.addEventListener("click",i)};e.exports=t},function(e){var t=function(e,t){var n,i,r=t.toBack&&document.querySelector(t.toBack),o=t.toFront&&document.querySelector(t.toFront),a=function(){e.selected&&(e.svg.insertBefore(e.selected,n),c(),e.emit("element:change:z-index",e.selected))},s=function(){e.selected&&(e.svg.insertBefore(e.selected,i.nextElementSibling),c(),e.emit("element:change:z-index",e.selected))},c=function(){n=e.selected&&e.selected.previousElementSibling,i=e.selected&&e.selected.nextElementSibling,r&&u(r,n),o&&u(o,i)},u=function(t,n){t.disabled=!n||!n.classList.contains(e.config.itemClass)};e.on("ready",c),e.on("element:select",c),e.on("element:unselect",c),r&&r.addEventListener("click",a),o&&o.addEventListener("click",s)};e.exports=t},function(e,t,n){var i=n(20),r={color:"#ffffff"},o=function(e,t){var n,r=function(){n=e.svg.querySelector(".background")||o()},o=function(){var n=e.utils.svgCreate("rect");return n.setAttribute("fill",t.color),n.setAttribute("width","100%"),n.setAttribute("height","100%"),n.classList.add("background"),e.svg.insertBefore(n,e.svg.firstChild),n},a=function(e){n.setAttribute("fill",e)},s=function(){e.emit("background:change",n.getAttribute("fill"))};i(e,t,a,s),e.on("ready",r)};o.defaults=r,e.exports=o},function(e){var t={widthAttribute:"data-width",heightAttribute:"data-height"},n=function(e,t){var n=document.querySelector(t.element),i=function(){var t=e.svg.getAttribute("data-product");t&&(n.value=t)},r=function(){var i=n.options[n.selectedIndex],r=i.getAttribute(t.widthAttribute),o=i.getAttribute(t.heightAttribute);e.svg.setAttribute("data-product",n.value),e.setSize(r,o)};e.on("ready",i),n.addEventListener("change",r)};n.defaults=t,e.exports=n},function(e){var t={iconWidth:20,iconHeight:20},n=function(e,t){var n,i=e.utils.animation(),r=e.utils.svgCreate("image");r.setAttributeNS("http://www.w3.org/1999/xlink","href",t.image),r.setAttribute("width",t.iconWidth),r.setAttribute("height",t.iconHeight);var o=function(e){r.setAttribute("x",(e||n).getBBox().width),r.setAttribute("y",(e||n).getBBox().height)};e.on("element:select",function(t){"image"===t.tagName&&(n=t,o(),e.selected.appendChild(r))}),e.on("resize",o),e.utils.dragDrop({element:r,start:function(t,n){t.stopPropagation(),t.preventDefault();var i=r.getBoundingClientRect();n.offsetX=e.utils.pageX(t)-(i.left+document.body.scrollLeft),n.offsetY=e.utils.pageY(t)-i.top,e.container.classList.add("resizing")},move:function(t,o){t.preventDefault();var a=50*e.config.scaleFactor;i(function(){var i=n.getBoundingClientRect(),s=e.utils.pageX(t)-o.offsetX-i.left,c=e.utils.pageY(t)-o.offsetY-i.top;s>a&&(r.setAttribute("x",s),e.utils.svgWidth(n,s)),c>a&&(r.setAttribute("y",c),e.utils.svgHeight(n,c)),e.emit("resize")})},stop:function(){e.container.classList.remove("resizing"),e.emit("element:resize",n)}})};n.defaults=t,e.exports=n},function(e){var t={iconWidth:20,iconHeight:20},n=180/Math.PI,i=function(e,t){var i,r=e.utils.animation(),o=e.utils.svgCreate("image");o.setAttributeNS("http://www.w3.org/1999/xlink","href",t.image),o.setAttribute("width",t.iconWidth),o.setAttribute("height",t.iconHeight);var a=function(){o.setAttribute("x",i.getBBox().width),o.setAttribute("y",-t.iconHeight+i.getBBox().y)};e.on("element:select",function(t){i=t,a(),e.selected.appendChild(o)}),e.on("resize",a),e.utils.dragDrop({element:o,start:function(t,n){t.stopPropagation(),t.preventDefault();var i=e.svg.getBoundingClientRect();n.pos=e.utils.svgTranslate(e.selected),n.pos.x+=i.left+jQuery(document).scrollLeft(),n.pos.y+=i.top+jQuery(document).scrollTop(),e.container.classList.add("rotating")},move:function(t,o){t.preventDefault(),r(function(){var r=e.utils.pageX(t)-o.pos.x,a=o.pos.y-e.utils.pageY(t),s=-Math.atan2(a,r)*n;e.utils.svgRotate(e.selected,s),e.emit("rotate",i)})},stop:function(){e.container.classList.remove("rotating"),e.emit("element:rotate",i)}})};i.defaults=t,e.exports=i},function(e){var t={readyClass:"preview-ready"},n=function(e,t){var n,i,r=document.querySelector(t.element),o=["menubar=0","toolbar=0","scrollbars=0","location=0","personalbar=0","status=0","resizable","chrome","centerscreen","dependent","dialog"],a=function(){i&&i.close(),i=window.open(n.url,"preview",o.join(",")+",width="+n.width+",height="+n.height)};r.addEventListener("click",function(){return n?(a(),void e.emit("preview:open")):void e.createPng().then(function(i){n=i,document.body.classList.add(t.readyClass),document.addEventListener("click",s),e.emit("preview:ready")})});var s=function(){n=void 0,document.body.classList.remove(t.readyClass),document.removeEventListener("click",s)}};n.defaults=t,e.exports=n},function(e){e.exports=function(e){var t={},n=[].slice;return e.on=function(n,i){return(t[n]=t[n]||[]).push(i),e},e.emit=function(i){var r,o,a=n.call(arguments,1),s=[],c=i.split(":");for(r=1;r<=c.length;r++){var u=t[c.slice(0,r).join(":")];u&&(s=s.concat(u))}for(r=0,o;o=s[r];++r)o.apply(null,a);return e},e.off=function(n,i){if(i){var r=t[n],o=r.indexOf(i);o>=0&&r.splice(o,1)}else t[n]=[];return e},e}},function(e){e.exports=function(e){var t=e.utils.svgCreate("svg");e.container.innerHTML="",e.container.appendChild(t),e.svg=t,e.setSize(e.config.width,e.config.height),e.emit("svg:load")}},function(e){e.exports=function(e){var t=function(){var e=o();e&&i(e)},n=function(t){var n=!t.target.classList.contains(e.config.itemClass);if(n)return r();t.stopPropagation();var o=!t.target.classList.contains(e.config.itemSelectClass);o&&i(t.target)},i=function(t){r();var n=e.utils.svgCreate("g");t.classList.add(e.config.itemSelectClass),n.setAttribute("transform",t.getAttribute("transform")),t.setAttribute("transform","");var i=t.nextSibling;n.appendChild(t),e.svg.insertBefore(n,i),a(!0),e.selected=n,e.emit("element:select",t)},r=function(t){if(t||(t=o()),a(!1),e.selected=void 0,!t)return e.emit("element:unselect");var n=t.parentNode,i=n.nextSibling;n.parentNode.removeChild(n),t.classList.remove(e.config.itemSelectClass),t.setAttribute("transform",n.getAttribute("transform")),e.svg.insertBefore(t,i),e.emit("element:unselect",t)},o=function(){return e.svg.querySelector("."+e.config.itemClass+"."+e.config.itemSelectClass)},a=function(t){document.body.classList[t?"add":"remove"](e.config.selectBodyClass)};e.on("element:create",i).on("element:delete",r).on("render",r).on("svg:load",t).on("ready",t).container.addEventListener(e.utils.onDown(),n)}},function(e){e.exports=function(e){var t=e.utils.animation();e.utils.dragDrop({element:e.container,start:function(t,i){var r=t.target.classList.contains(e.config.itemSelectClass);return r?(t.preventDefault(),i.cursorOffset=n(t,e.selected),void e.selected.classList.add(e.config.itemDragClass)):!1},move:function(n,i){t(function(){e.utils.svgTranslate(e.selected,e.utils.pageX(n)-i.cursorOffset.x,e.utils.pageY(n)-i.cursorOffset.y),e.emit("move",e.selected)})},stop:function(t){t.preventDefault(),e.selected.classList.remove(e.config.itemDragClass),e.emit("element:change:position",e.selected)}});var n=function(t,n){var i=e.utils.svgTranslate(n);return{x:e.utils.pageX(t)-i.x,y:e.utils.pageY(t)-i.y}}}},function(e){var t={};t.svgCreate=function(e){return document.createElementNS("http://www.w3.org/2000/svg",e)},t.svgTranslate=function(e){var t=Array.prototype.slice.call(arguments,1);if(t.length)return n(e,"translate",t);var r=i(e,"translate");return r?{x:r[0],y:r[r.length-1]}:{x:0,y:0}},t.svgRotate=function(e){var t=Array.prototype.slice.call(arguments,1);if(t.length)return n(e,"rotate",t);var r=i(e,"rotate");return r?r[0]:0},t.svgWidth=function(e,t){return t?e.setAttribute("width",t):parseInt(e.getAttribute("width"),10)},t.svgHeight=function(e,t){return t?e.setAttribute("height",t):parseInt(e.getAttribute("height"),10)};var n=function(e,t,n){var i,o=e.getAttribute("transform");return i=o?o.match(t)?o.replace(new RegExp(t+"\\((.+?)\\)"),r(t,n)):o+" "+r(t,n):r(t,n),e.setAttribute("transform",i)},i=function(e,t){var n=e.getAttribute("transform");if(n){var i=n.match(t+"\\((.+?)\\)");if(i)return i[1].trim().split(" ").map(function(e){return parseInt(e,10)})}},r=function(e,t){return e+"("+t.join(" ")+")"};t.animation=function(){var e;return function(t){e&&window.cancelAnimationFrame(e),e=window.requestAnimationFrame(t)}},t.defaults=function(e,t){return e||(e={}),t&&Object.keys(t).forEach(function(n){"undefined"==typeof e[n]&&(e[n]=t[n])}),e},t.isMobile=function(){return/android|webos|iphone|ipad|ipod|blackberry|iemobile|opera mini/i.test(navigator.userAgent.toLowerCase())},t.pageX=function(e){return t.isMobile()?e.touches[0].pageX:e.pageX},t.pageY=function(e){return t.isMobile()?e.touches[0].pageY:e.pageY},t.onMove=function(){return t.isMobile()?"touchmove":"mousemove"},t.onDown=function(){return t.isMobile()?"touchstart":"mousedown"},t.onUp=function(){return t.isMobile()?"touchend":"mouseup"},t.dragDrop=function(e){var n=t.defaults(e,{element:document,start:function(){},stop:function(){},move:function(){},enable:function(){n.element.addEventListener(t.onDown(),i)},disable:function(){n.element.removeEventListener(t.onDown(),i)}}),i=function(e){var i={};if(n.start(e,i)!==!1){var r=function(e){n.move(e,i)},o=function(e){n.stop(e,i),document.removeEventListener(t.onMove(),r),document.removeEventListener(t.onUp(),o)};document.addEventListener(t.onMove(),r),document.addEventListener(t.onUp(),o)}};return n.enable(),n},t.getPosition=function(e){for(var t=0,n=0;e;)t+=e.offsetLeft-e.scrollLeft+e.clientLeft,n+=e.offsetTop-e.scrollTop+e.clientTop,e=e.offsetParent;return{x:t,y:n}},e.exports=t},function(e,t,n){var i=n(21),r=document.createElement("canvas"),o=r.getContext("2d");e.exports=function(e){return new i(function(t){var n=new Image;n.onload=function(){r.width=n.width,r.height=n.height,o.drawImage(n,0,0),t({url:r.toDataURL("image/png"),width:n.width,height:n.height})},n.src=e})}},function(e){var t=function(e){var t;t=e.split(",")[0].indexOf("base64")>=0?atob(e.split(",")[1]):unescape(e.split(",")[1]);for(var n=e.split(",")[0].split(":")[1].split(";")[0],i=new Uint8Array(t.length),r=0;r<t.length;r++)i[r]=t.charCodeAt(r);return new Blob([i],{type:n})};e.exports=t},function(e,t,n){var i=n(21),r=n(17);e.exports=function(e){return e.type.match(/image\/*/)?new i(function(t){var n=new FileReader;n.onloadend=function(){var n=new Blob([this.result],{type:e.type}),i=(window.URL||window.webkitURL||window).createObjectURL(n);t(r(i))},n.readAsArrayBuffer(e)}):i.reject()}},function(e){e.exports=function(e,t,n,i){var r=document.querySelector(t.element),o=document.createElement("canvas"),a=o.getContext("2d");r.appendChild(o);var s=function(){var e=new Image;e.onload=function(){o.width=e.width,o.height=e.height,a.drawImage(e,0,0,e.width,e.height)},e.src=t.image},c=function(e){e.preventDefault();var t=u(e);n(l(t))},u=function(t){var n=t.target.getBoundingClientRect();return console.log(e.utils.pageY(t),n.top,jQuery(document).scrollTop()),{left:e.utils.pageX(t)-n.left-jQuery(document).scrollLeft(),top:e.utils.pageY(t)-n.top-jQuery(document).scrollTop()}},l=function(e){var t=a.getImageData(e.left,e.top,1,1).data;return"rgb("+t[0]+","+t[1]+","+t[2]+")"};e.utils.dragDrop({element:r,start:c,move:c,stop:i}),e.on("ready",s)}},function(e){/**@license MIT-promiscuous-©Ruben Verborgh*/
!function(t,n){function i(e,t){return(typeof t)[0]==e}function r(e,a){return a=function s(c,u,l,d,f,g){function v(e){return function(t){f&&(f=0,s(i,e,t))}}if(d=s.q,c!=i)return r(function(e,t){d.push({p:this,r:e,j:t,1:c,0:u})});if(l&&i(t,l)|i(n,l))try{f=l.then}catch(m){u=0,l=m}if(i(t,f))try{f.call(l,v(1),u=v(0))}catch(m){u(m)}else for(a=function(n,a){return i(t,n=u?n:a)?r(function(e,t){o(this,e,t,l,n)}):e},g=0;g<d.length;)f=d[g++],i(t,c=f[u])?o(f.p,f.r,f.j,l,c):(u?f.r:f.j)(l)},a.q=[],e.call(e={then:function(e,t){return a(e,t)},"catch":function(e){return a(0,e)}},function(e){a(i,1,e)},function(e){a(i,0,e)}),e}function o(e,r,o,a,s){setImmediate(function(){try{a=s(a),s=a&&i(n,a)|i(t,a)&&a.then,i(t,s)?a==e?o(TypeError()):s.call(a,r,o):r(a)}catch(c){o(c)}})}function a(e){return r(function(t){t(e)})}e.exports=r,r.resolve=a,r.reject=function(e){return r(function(t,n){n(e)})},r.all=function(e){return r(function(t,n,i,r){r=[],i=e.length||t(r),e.map(function(e,o){a(e).then(function(e){r[o]=e,--i||t(r)},n)})})}}("f","o")}]);