!function(t){function e(r){if(n[r])return n[r].exports;var i=n[r]={exports:{},id:r,loaded:!1};return t[r].call(i.exports,i,i.exports,e),i.loaded=!0,i.exports}var n={};return e.m=t,e.c=n,e.p="",e(0)}([function(t,e,n){window.setImmediate=window.setTimeout;var r=n(1);r.imageUpload=n(2),window.graphicDesigner=r},function(t,e,n){var r=n(5),i=n(6),o=n(3),u=function(t){var e={};return e.config=o.defaults(t||{},c),Object.keys(u).forEach(function(t){e[t]=function(n){u[t](e,n)}}),e.setSize=function(t,n){"mm"===e.config.unit&&(t=a(t),n=a(n)),"pixel"!==e.config.unit&&(t*=e.config.dpi,n*=e.config.dpi),e.svg.setAttribute("width",Math.round(t*e.config.scaleFactor)),e.svg.setAttribute("height",Math.round(n*e.config.scaleFactor))},e.eventEmitter(),e.graphicElement(),e};u.eventEmitter=r,u.graphicElement=i;var c={unit:"pixel",dpi:300,width:500,height:500,scaleFactor:1,selectClass:"item-selected",itemClass:"item",itemSelectClass:"selected",itemDragClass:"dragging"},a=function(t){return Math.round(3.937*t)/100};t.exports=u},function(t,e,n){var r=n(4),i=n(3);t.exports=function(t,e){function n(){var t=document.createEvent("HTMLEvents");t.initEvent("click",!0,!1),d.dispatchEvent(t)}function o(t){t.preventDefault(),s&&clearTimeout(s)}function u(t){return t.dataTransfer.files.length>1?void 0:r(t.dataTransfer.files[0])}function c(e){var n=t.svg.getBoundingClientRect(),r=Math.min(n.width/e.width,n.height/e.height,1);return e.width=Math.round(r*e.width),e.height=Math.round(r*e.height),e}function a(e){var n=t.svg.getBoundingClientRect();return e.x=Math.round(.5*(n.width-e.width)),e.y=Math.round(.5*(n.height-e.height)),e}function f(e){var n=i.createSvg("image");n.setAttribute("height",e.height),n.setAttribute("width",e.width),n.setAttribute("class","element"),n.setAttributeNS("http://www.w3.org/1999/xlink","href",e.url),i.translateSvg(n,e.x,e.y),t.svg.appendChild(n),t.emit("create:element",n)}function l(e){return e.target!==t.svg?a:function(n){var r=t.svg.getBoundingClientRect(),i=r.top+document.body.scrollTop,o=r.left+document.body.scrollLeft;return n.x=Math.round(e.pageX-o-.5*n.width),n.y=Math.round(e.pageY-i-.5*n.height),n}}e||(e={}),i.defaults(e,{dropZoneClass:"image-drop"});var s,d=document.createElement("input");return d.type="file",d.accept="image/*",document.querySelector(e.element).addEventListener("click",n),d.addEventListener("change",function(){1===d.files.length&&r(d.files[0]).then(c).then(a).then(f)}),document.addEventListener("dragenter",o),document.addEventListener("dragover",o),document.addEventListener("drop",function(t){t.preventDefault(),u(t).then(c).then(l(t)).then(f)}),t}},function(t){function e(t,e,n){var i,o=t.getAttribute("transform");return i=o?o.match(e)?o.replace(new RegExp(e+"\\((.+?)\\)"),r(e,n)):o+" "+r(e,n):r(e,n),t.setAttribute("transform",i)}function n(t,e){var n=t.getAttribute("transform");if(n){var r=n.match(e+"\\((.+?)\\)");if(r)return r[1].trim().split(" ").map(function(t){return parseInt(t,10)})}}function r(t,e){return t+"("+e.join(" ")+")"}var i={},o={"boolean":!1,"function":!0,object:!0,number:!1,string:!1,undefined:!1};i.defaults=function(t,e,n){var r,i=t,u=i;if(!i)return u;for(var c=arguments,a=0,f="number"==typeof n?2:c.length;++a<f;)if(i=c[a],i&&o[typeof i])for(var l=-1,s=o[typeof i]&&Object.keys(i),d=s?s.length:0;++l<d;)r=s[l],"undefined"==typeof u[r]&&(u[r]=i[r]);return u},i.createSvg=function(t){return document.createElementNS("http://www.w3.org/2000/svg",t)},i.translateSvg=function(t){var r=Array.prototype.slice.call(arguments,1);if(r.length)return e(t,"translate",r);var i=n(t,"translate");return i?{x:i[0],y:i[i.length-1]}:{x:0,y:0}},t.exports=i},function(t,e,n){var r=n(8),i=n(7);t.exports=function(t){return t.type.match(/image\/*/)?new r(function(e){var n=new FileReader;n.onloadend=function(){var n=new Blob([this.result],{type:t.type}),r=(window.URL||window.webkitURL||window).createObjectURL(n);e(i(r))},n.readAsArrayBuffer(t)}):r.reject()}},function(t){t.exports=function(t){var e={},n=[].slice;return t.on=function(n,r){return(e[n]=e[n]||[]).push(r),t},t.once=function(e,n){return t.on(e,function r(){n.apply(null,arguments),t.off(e,r)})},t.emit=function(r){var i,o,u=n.call(arguments,1),c=[],a=r.split(":");for(i=1;i<=a.length;i++){var f=e[a.slice(0,i).join(":")];f&&(c=c.concat(f))}for(console.log("EVENT: ",r," => ",c.map(function(t){return t.name}).join(", ")||"nothing to do ..."),i=0,o;o=c[i];++i)o.apply(null,u);return t},t.off=function(n,r){if(r){var i=e[n],o=i.indexOf(r);o>=0&&i.splice(o,1)}else e[n]=[];return t},t}},function(t,e,n){var r=n(3);t.exports=function(t){var e=document.querySelector(t.config.element),n=r.createSvg("svg");e.innerHTML="",e.appendChild(n),t.svg=n,t.setSize(t.config.width,t.config.height),t.emit("svg:loaded")}},function(t,e,n){var r=n(8),i=document.createElement("canvas"),o=i.getContext("2d");t.exports=function(t){return new r(function(e){var n=new Image;n.onload=function(){i.width=n.width,i.height=n.height,o.drawImage(n,0,0),e({url:i.toDataURL("image/png"),width:n.width,height:n.height})},n.src=t})}},function(t){/**@license MIT-promiscuous-Â©Ruben Verborgh*/
!function(e,n){function r(t,e){return(typeof e)[0]==t}function i(t,u){return u=function c(a,f,l,s,d,h){function g(t){return function(e){d&&(d=0,c(r,t,e))}}if(s=c.q,a!=r)return i(function(t,e){s.push({p:this,r:t,j:e,1:a,0:f})});if(l&&r(e,l)|r(n,l))try{d=l.then}catch(p){f=0,l=p}if(r(e,d))try{d.call(l,g(1),f=g(0))}catch(p){f(p)}else for(u=function(n,u){return r(e,n=f?n:u)?i(function(t,e){o(this,t,e,l,n)}):t},h=0;h<s.length;)d=s[h++],r(e,a=d[f])?o(d.p,d.r,d.j,l,a):(f?d.r:d.j)(l)},u.q=[],t.call(t={then:function(t,e){return u(t,e)},"catch":function(t){return u(0,t)}},function(t){u(r,1,t)},function(t){u(r,0,t)}),t}function o(t,i,o,u,c){setImmediate(function(){try{u=c(u),c=u&&r(n,u)|r(e,u)&&u.then,r(e,c)?u==t?o(TypeError()):c.call(u,i,o):i(u)}catch(a){o(a)}})}function u(t){return i(function(e){e(t)})}t.exports=i,i.resolve=u,i.reject=function(t){return i(function(e,n){n(t)})},i.all=function(t){return i(function(e,n,r,i){i=[],r=t.length||e(i),t.map(function(t,o){u(t).then(function(t){i[o]=t,--r||e(i)},n)})})}}("f","o")}]);