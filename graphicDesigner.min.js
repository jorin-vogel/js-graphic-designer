!function(e){function t(i){if(n[i])return n[i].exports;var r=n[i]={exports:{},id:i,loaded:!1};return e[i].call(r.exports,r,r.exports,t),r.loaded=!0,r.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){window.setImmediate||(window.setImmediate=window.setTimeout);var i=n(1);i.plugins.imageUpload=n(2),i.plugins.cache=n(3),i.plugins.deleteButton=n(4),i.plugins.zIndexUpdate=n(5),i.plugins.backgroundColorPicker=n(6),i.plugins.sizeSelect=n(7),window.graphicDesigner=i},function(e,t,n){var i=n(8),r=n(9),o=n(10),c=n(11),a=n(12),u={width:500,height:500,scaleFactor:1,unit:"pixel",dpi:300,selectBodyClass:"item-selected",itemClass:"item",itemSelectClass:"selected",itemDragClass:"dragging"},s=function(e){var t={};return t.config=d(e,u),t.container=document.querySelector(t.config.element),Object.keys(s.plugins).forEach(function(e){t[e]=function(n){var i=s.plugins[e];return i(t,d(n,i.defaults)),t}}),t.setSize=function(e,n){"mm"===t.config.unit&&(e=l(e),n=l(n)),"pixel"!==t.config.unit&&(e*=t.config.dpi,n*=t.config.dpi),t.svg.setAttribute("width",Math.round(e*t.config.scaleFactor)),t.svg.setAttribute("height",Math.round(n*t.config.scaleFactor)),t.emit("svg:resize")},t.ready=function(){t.emit("ready")},t.utils=a,i(t),r(t),o(t),c(t),t};s.plugins={};var l=function(e){return Math.round(3.937*e)/100},d=function(e,t){return e||(e={}),t&&Object.keys(t).forEach(function(n){"undefined"==typeof e[n]&&(e[n]=t[n])}),e};e.exports=s},function(e,t,n){var i=n(14),r=n(13),o=function(e,t){var n=document.querySelector(t.element),o=document.createElement("input");o.type="file",o.accept="image/*";var c=function(){g(o.files).then(r).then(v).then(m).then(h)},a=function(){var e=document.createEvent("HTMLEvents");e.initEvent("click",!0,!1),o.dispatchEvent(e)},u=function(e){e.preventDefault(),f(!1),g(e.dataTransfer.files).then(r).then(v).then(p(e)).then(h)},s=function(e){e.preventDefault(),f(!0)},l=function(){f(!1)},d=function(e,t){var n,i,r;return function o(){return i=arguments,n?void(r=!0):(e.apply(null,i),void(n=setTimeout(function(){clearTimeout(n),n=void 0,r&&(r=!1,o.apply(null,i))},t)))}},f=d(function(e){t.dropBodyClass&&document.body.classList[e?"add":"remove"](t.dropBodyClass)},300),g=function(e){return 1===e.length?i.resolve(e[0]):i.reject()},v=function(t){var n=e.svg.getBoundingClientRect(),i=Math.min(n.width/t.width,n.height/t.height,1);return t.width=Math.round(i*t.width),t.height=Math.round(i*t.height),t},m=function(t){var n=e.svg.getBoundingClientRect();return t.x=Math.round(.5*(n.width-t.width)),t.y=Math.round(.5*(n.height-t.height)),t},h=function(t){var n=e.utils.createSvg("image");n.setAttribute("height",t.height),n.setAttribute("width",t.width),n.setAttribute("class",e.config.itemClass),n.setAttributeNS("http://www.w3.org/1999/xlink","href",t.url),e.utils.translateSvg(n,t.x,t.y),e.svg.appendChild(n),e.emit("element:create",n)},p=function(t){return t.target!==e.svg?m:function(n){var i=e.svg.getBoundingClientRect(),r=i.top+document.body.scrollTop,o=i.left+document.body.scrollLeft;return n.x=Math.round(t.pageX-o-.5*n.width),n.y=Math.round(t.pageY-r-.5*n.height),n}};document.addEventListener("dragenter",s),document.addEventListener("dragover",s),document.addEventListener("dragleave",l),document.addEventListener("drop",u),o.addEventListener("change",c),n&&n.addEventListener("click",a)};e.exports=o},function(e){var t={storageKey:"graphicDesignerGraphic"},n=function(e,t){var n=function(){var n=localStorage.getItem(t.storageKey);n&&(e.container.innerHTML=n,e.svg=e.container.querySelector("svg"),e.emit("svg:load"))},i=function(){localStorage.setItem(t.storageKey,e.container.innerHTML),e.emit("cache:change")};e.on("ready",n).on("element",i).on("svg:resize",i).on("background",i)};n.defaults=t,e.exports=n},function(e){var t=function(e,t){var n=document.querySelector(t.element),i=function(){e.selected&&window.confirm("Soll das ausgewählte Element echt gelöscht werden?")&&(e.selected.parentNode.removeChild(e.selected),n.classList.add("hide"),n.removeEventListener("click",i),e.emit("element:delete",e.selected))};n.addEventListener("click",i)};e.exports=t},function(e){var t=function(e,t){var n,i,r=t.toBack&&document.querySelector(t.toBack),o=t.toFront&&document.querySelector(t.toFront),c=function(){e.selected&&(e.svg.insertBefore(e.selected,n),u(),e.emit("element:change:z-index",e.selected))},a=function(){e.selected&&(e.svg.insertBefore(e.selected,i.nextElementSibling),u(),e.emit("element:change:z-index",e.selected))},u=function(){n=e.selected&&e.selected.previousElementSibling,i=e.selected&&e.selected.nextElementSibling,r&&s(r,n),o&&s(o,i)},s=function(t,n){t.disabled=!n||!n.classList.contains(e.config.itemClass)};e.on("ready",u),e.on("element:select",u),e.on("element:unselect",u),r&&r.addEventListener("click",c),o&&o.addEventListener("click",a)};e.exports=t},function(e){var t={color:"#ffffff"},n=function(e,t){var n,i=document.querySelector(t.element),r=document.createElement("canvas"),o=r.getContext("2d");i.appendChild(r);var c=function(){n=e.svg.querySelector(".background")||a()},a=function(){var n=e.utils.createSvg("rect");return n.setAttribute("fill",t.color),n.setAttribute("width","100%"),n.setAttribute("height","100%"),n.classList.add("background"),e.svg.insertBefore(n,e.svg.firstChild),n},u=function(){var e=new Image;e.onload=function(){r.width=e.width,r.height=e.height,o.drawImage(e,0,0,e.width,e.height)},e.src=t.image},s=function(t){i.addEventListener(e.utils.onMove(),d),i.addEventListener(e.utils.onUp(),l),d(t)},l=function(){i.removeEventListener(e.utils.onMove(),d),i.removeEventListener(e.utils.onUp(),l),e.emit("background:change",n.fill)},d=function(e){e.preventDefault();var t=f(e);n.setAttribute("fill",g(t))},f=function(t){var n=t.target.getBoundingClientRect();return{left:e.utils.pageX(t)-n.left-document.body.scrollLeft,top:e.utils.pageY(t)-n.top-document.body.scrollTop}},g=function(e){var t=o.getImageData(e.left,e.top,1,1).data;return"rgb("+t[0]+","+t[1]+","+t[2]+")"};e.on("ready",c).on("ready",u),i.addEventListener(e.utils.onDown(),s)};n.defaults=t,e.exports=n},function(e){var t={widthAttribute:"data-width",heightAttribute:"data-height"},n=function(e,t){var n=document.querySelector(t.element),i=function(){var t=e.svg.getAttribute("data-product");t&&(n.value=t)},r=function(){var i=n.options[n.selectedIndex],r=i.getAttribute(t.widthAttribute),o=i.getAttribute(t.heightAttribute);e.svg.setAttribute("data-product",n.value),e.setSize(r,o)};e.on("ready",i),n.addEventListener("change",r)};n.defaults=t,e.exports=n},function(e){e.exports=function(e){var t={},n=[].slice;return e.on=function(n,i){return(t[n]=t[n]||[]).push(i),e},e.emit=function(i){var r,o,c=n.call(arguments,1),a=[],u=i.split(":");for(r=1;r<=u.length;r++){var s=t[u.slice(0,r).join(":")];s&&(a=a.concat(s))}for(r=0,o;o=a[r];++r)o.apply(null,c);return e},e.off=function(n,i){if(i){var r=t[n],o=r.indexOf(i);o>=0&&r.splice(o,1)}else t[n]=[];return e},e}},function(e){e.exports=function(e){var t=e.utils.createSvg("svg");e.container.innerHTML="",e.container.appendChild(t),e.svg=t,e.setSize(e.config.width,e.config.height),e.emit("svg:load")}},function(e){e.exports=function(e){var t=function(){var e=o();e&&i(e)},n=function(t){var n=!t.target.classList.contains(e.config.itemClass);if(n)return r();t.stopPropagation();var o=!t.target.classList.contains(e.config.itemSelectClass);o&&i(t.target)},i=function(t){r(),t.classList.add(e.config.itemSelectClass),c(!0),e.selected=t,e.emit("element:select",t)},r=function(t){t||(t=o()),t&&(t.classList.remove(e.config.itemSelectClass),c(!1),e.selected=void 0,e.emit("element:unselect",t))},o=function(){return e.svg.querySelector("."+e.config.itemClass+"."+e.config.itemSelectClass)},c=function(t){document.body.classList[t?"add":"remove"](e.config.selectBodyClass)};e.on("element:create",i).on("element:delete",r).on("render",r).on("svg:load",t).on("ready",t).container.addEventListener(e.utils.onDown(),n)}},function(e){e.exports=function(e){var t,n=e.utils.animation(),i=function(n){var i=n.target.classList.contains(e.config.itemSelectClass);i&&(n.preventDefault(),t=c(n,e.selected),e.selected.classList.add(e.config.itemDragClass),e.svg.addEventListener(e.utils.onMove(),r),document.addEventListener(e.utils.onUp(),o))},r=function(i){n(function(){e.utils.translateSvg(e.selected,e.utils.pageX(i)-t.x,e.utils.pageY(i)-t.y),e.emit("move",e.selected)})},o=function(t){t.preventDefault(),e.svg.removeEventListener(e.utils.onMove(),r),document.removeEventListener(e.utils.onUp(),o),e.selected.classList.remove(e.config.itemDragClass),e.emit("element:change:position",e.selected)},c=function(t,n){var i=e.utils.translateSvg(n);return{x:e.utils.pageX(t)-i.x,y:e.utils.pageY(t)-i.y}};e.container.addEventListener(e.utils.onDown(),i)}},function(e){var t={};t.createSvg=function(e){return document.createElementNS("http://www.w3.org/2000/svg",e)},t.translateSvg=function(e){var t=Array.prototype.slice.call(arguments,1);if(t.length)return n(e,"translate",t);var r=i(e,"translate");return r?{x:r[0],y:r[r.length-1]}:{x:0,y:0}};var n=function(e,t,n){var i,o=e.getAttribute("transform");return i=o?o.match(t)?o.replace(new RegExp(t+"\\((.+?)\\)"),r(t,n)):o+" "+r(t,n):r(t,n),e.setAttribute("transform",i)},i=function(e,t){var n=e.getAttribute("transform");if(n){var i=n.match(t+"\\((.+?)\\)");if(i)return i[1].trim().split(" ").map(function(e){return parseInt(e,10)})}},r=function(e,t){return e+"("+t.join(" ")+")"};t.animation=function(){var e;return function(t){e&&window.cancelAnimationFrame(e),e=window.requestAnimationFrame(t)}},t.isMobile=function(){return/android|webos|iphone|ipad|ipod|blackberry|iemobile|opera mini/i.test(navigator.userAgent.toLowerCase())},t.pageX=function(e){return t.isMobile()?e.originalEvent.touches[0].pageX:e.pageX},t.pageY=function(e){return t.isMobile()?e.originalEvent.touches[0].pageY:e.pageY},t.onMove=function(){return t.isMobile()?"touchmove":"mousemove"},t.onDown=function(){return t.isMobile()?"touchstart":"mousedown"},t.onUp=function(){return t.isMobile()?"touchend":"mouseup"},e.exports=t},function(e,t,n){var i=n(14),r=n(15);e.exports=function(e){return e.type.match(/image\/*/)?new i(function(t){var n=new FileReader;n.onloadend=function(){var n=new Blob([this.result],{type:e.type}),i=(window.URL||window.webkitURL||window).createObjectURL(n);t(r(i))},n.readAsArrayBuffer(e)}):i.reject()}},function(e){/**@license MIT-promiscuous-©Ruben Verborgh*/
!function(t,n){function i(e,t){return(typeof t)[0]==e}function r(e,c){return c=function a(u,s,l,d,f,g){function v(e){return function(t){f&&(f=0,a(i,e,t))}}if(d=a.q,u!=i)return r(function(e,t){d.push({p:this,r:e,j:t,1:u,0:s})});if(l&&i(t,l)|i(n,l))try{f=l.then}catch(m){s=0,l=m}if(i(t,f))try{f.call(l,v(1),s=v(0))}catch(m){s(m)}else for(c=function(n,c){return i(t,n=s?n:c)?r(function(e,t){o(this,e,t,l,n)}):e},g=0;g<d.length;)f=d[g++],i(t,u=f[s])?o(f.p,f.r,f.j,l,u):(s?f.r:f.j)(l)},c.q=[],e.call(e={then:function(e,t){return c(e,t)},"catch":function(e){return c(0,e)}},function(e){c(i,1,e)},function(e){c(i,0,e)}),e}function o(e,r,o,c,a){setImmediate(function(){try{c=a(c),a=c&&i(n,c)|i(t,c)&&c.then,i(t,a)?c==e?o(TypeError()):a.call(c,r,o):r(c)}catch(u){o(u)}})}function c(e){return r(function(t){t(e)})}e.exports=r,r.resolve=c,r.reject=function(e){return r(function(t,n){n(e)})},r.all=function(e){return r(function(t,n,i,r){r=[],i=e.length||t(r),e.map(function(e,o){c(e).then(function(e){r[o]=e,--i||t(r)},n)})})}}("f","o")},function(e,t,n){var i=n(14),r=document.createElement("canvas"),o=r.getContext("2d");e.exports=function(e){return new i(function(t){var n=new Image;n.onload=function(){r.width=n.width,r.height=n.height,o.drawImage(n,0,0),t({url:r.toDataURL("image/png"),width:n.width,height:n.height})},n.src=e})}}]);